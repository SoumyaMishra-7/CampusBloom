.asp-page { display: grid; gap: 1rem; animation: aspFade .4s var(--ez, cubic-bezier(.22,1,.36,1)) both; }
.asp-page.is-logging-out { animation: aspLogoutFade .8s ease forwards; pointer-events: none; }
.asp-reveal { opacity: 0; transform: translateY(8px); animation: aspReveal .55s var(--ez, cubic-bezier(.22,1,.36,1)) forwards; animation-delay: var(--asp-delay, 0ms); }

.asp-header {
  border: 1px solid var(--bd); background: var(--card); border-radius: 22px; box-shadow: var(--sh2);
  padding: 1rem 1.05rem; display: flex; align-items: center; justify-content: space-between; gap: .9rem; flex-wrap: wrap;
}
.asp-header h1 { margin: 0; font-size: clamp(1.15rem, 2vw, 1.65rem); letter-spacing: -.03em; }
.asp-header p { margin: .35rem 0 0; color: var(--muted); font-size: .86rem; }
.asp-header-status {
  border: 1px solid var(--bd); border-radius: 14px; background: rgba(16,185,129,.04); padding: .55rem .65rem;
  display: flex; align-items: center; gap: .55rem;
}
.asp-status-dot { width: 9px; height: 9px; border-radius: 999px; }
.asp-status-dot.online { background: #10b981; box-shadow: 0 0 0 0 rgba(16,185,129,.3); animation: aspPulse 2s ease-out infinite; }
.asp-header-status strong { display: block; font-size: .78rem; }
.asp-header-status span { display: block; color: var(--muted); font-size: .7rem; }

.asp-layout { display: grid; grid-template-columns: 300px minmax(0, 1fr); gap: .9rem; align-items: start; }
.asp-tabs {
  position: sticky; top: 84px; border: 1px solid var(--bd); background: var(--card); border-radius: 20px; box-shadow: var(--sh2); padding: .8rem;
  display: grid; gap: .35rem;
}
.asp-tab {
  border: 1px solid transparent; background: transparent; border-radius: 12px; padding: .72rem .8rem; text-align: left; cursor: pointer; color: var(--muted); font-weight: 600;
  transition: transform .2s var(--ez), color .2s var(--ez), background-color .2s var(--ez), border-color .2s var(--ez), box-shadow .2s var(--ez);
  animation: aspTabIn .36s var(--ez) both; animation-delay: var(--tab-delay, 0ms);
}
.asp-tab:hover { transform: translateX(2px); color: var(--txt); background: rgba(79,70,229,.03); }
.asp-tab.active { color: #fff; background: linear-gradient(135deg, #4F46E5, #6366f1); border-color: rgba(79,70,229,.3); box-shadow: 0 10px 22px rgba(79,70,229,.22); }
.asp-tab.logout { margin-top: .25rem; color: #ef4444; }
.asp-tab.logout.active { background: linear-gradient(135deg, #ef4444, #f87171); }

.asp-side-panels { margin-top: .5rem; display: grid; gap: .6rem; }
.asp-side-card {
  border: 1px solid var(--bd); border-radius: 14px; background: rgba(148,163,184,.03); padding: .75rem;
}
.asp-side-card h4 { margin: 0; font-size: .82rem; }
.asp-side-card p { margin: .2rem 0 .45rem; color: var(--muted); font-size: .72rem; }
.asp-side-card ul { margin: 0; padding-left: 1rem; color: var(--muted); font-size: .72rem; display: grid; gap: .3rem; }

.asp-content { display: grid; gap: .9rem; }
.asp-panel { border: 1px solid var(--bd); background: var(--card); border-radius: 20px; box-shadow: var(--sh2); padding: .95rem; }
.asp-panel-head { display: flex; align-items: center; justify-content: space-between; gap: .7rem; margin-bottom: .8rem; flex-wrap: wrap; }
.asp-panel-head.compact { margin-bottom: .65rem; }
.asp-panel-head h2 { margin: 0; font-size: 1rem; letter-spacing: -.02em; }
.asp-panel-head p { margin: .22rem 0 0; color: var(--muted); font-size: .76rem; }

.asp-btn {
  border: 1px solid var(--bd); background: var(--card); color: var(--txt); border-radius: 12px; padding: .66rem .82rem;
  display: inline-flex; align-items: center; justify-content: center; gap: .45rem; font-weight: 600; cursor: pointer;
  transition: transform .2s var(--ez), box-shadow .2s var(--ez), border-color .2s var(--ez), background-color .2s var(--ez), color .2s var(--ez);
}
.asp-btn:hover { transform: translateY(-2px); box-shadow: var(--sh2); }
.asp-btn:disabled { opacity: .6; cursor: not-allowed; transform: none; }
.asp-btn-primary { background: linear-gradient(135deg, #4F46E5, #6366f1); color: #fff; border-color: rgba(79,70,229,.3); box-shadow: 0 10px 24px rgba(79,70,229,.2); }
.asp-btn-soft { background: rgba(79,70,229,.04); border-color: rgba(79,70,229,.16); color: var(--p); }
.asp-btn-ghost { background: transparent; }
.asp-btn-danger { background: #ef4444; border-color: #ef4444; color: #fff; }

.asp-form-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: .8rem; }
.asp-actions-row { margin-top: .9rem; display: flex; justify-content: flex-end; gap: .55rem; flex-wrap: wrap; }

.asp-field { position: relative; display: grid; gap: .25rem; }
.asp-field > input, .asp-field > select, .asp-field > textarea {
  width: 100%; border-radius: 12px; border: 1px solid var(--bd); background: var(--card); color: var(--txt); outline: none;
  padding: 1.12rem .8rem .55rem; transition: border-color .2s ease, box-shadow .2s ease;
}
.asp-field > textarea { resize: vertical; min-height: 112px; }
.asp-field > input:focus, .asp-field > select:focus, .asp-field > textarea:focus {
  border-color: rgba(79,70,229,.35); box-shadow: 0 0 0 4px rgba(79,70,229,.08);
}
.asp-field > span {
  position: absolute; left: .78rem; top: .84rem; color: var(--muted); font-size: .78rem; pointer-events: none;
  transition: top .16s ease, font-size .16s ease, color .16s ease;
}
.asp-field.filled > span, .asp-field:focus-within > span { top: .38rem; font-size: .66rem; color: var(--p); }
.asp-field.err > input, .asp-field.err > select { border-color: rgba(239,68,68,.35); animation: aspFieldShake .28s ease; }
.asp-field small { color: #ef4444; font-size: .7rem; padding-left: .15rem; }

.asp-dept-card {
  margin-top: .85rem; border: 1px solid var(--bd); border-radius: 14px; background: rgba(148,163,184,.02); overflow: hidden;
}
.asp-dept-head { padding: .7rem .8rem; border-bottom: 1px solid var(--bd); display: flex; align-items: center; justify-content: space-between; gap: .6rem; }
.asp-dept-head strong { font-size: .82rem; }
.asp-dept-head span { color: var(--muted); font-size: .72rem; }
.asp-dept-table-wrap { overflow: auto; }
.asp-dept-table { width: 100%; min-width: 560px; border-collapse: separate; border-spacing: 0; }
.asp-dept-table thead th { text-align: left; color: var(--muted); font-size: .71rem; text-transform: uppercase; letter-spacing: .08em; padding: .75rem .8rem; border-bottom: 1px solid var(--bd); }
.asp-dept-table tbody td { padding: .72rem .8rem; border-bottom: 1px solid rgba(226,232,240,.76); animation: aspFade .3s ease both; }
.asp-dept-table tbody tr:hover { background: rgba(79,70,229,.02); }
.asp-dept-table tbody td input {
  width: 100%; border: 1px solid var(--bd); border-radius: 10px; padding: .55rem .65rem; background: var(--card); color: var(--txt); outline: none;
}
.asp-dept-table tbody td input:focus { border-color: rgba(79,70,229,.35); box-shadow: 0 0 0 4px rgba(79,70,229,.08); }

.asp-mini {
  border: 1px solid var(--bd); background: var(--card); color: var(--muted); border-radius: 10px; padding: .42rem .55rem; font-size: .7rem; font-weight: 700; cursor: pointer;
  transition: transform .2s var(--ez), border-color .2s var(--ez), color .2s var(--ez), background-color .2s var(--ez);
}
.asp-mini:hover { transform: translateY(-1px); color: var(--p); border-color: rgba(79,70,229,.18); }
.asp-mini.danger { color: #ef4444; border-color: rgba(239,68,68,.18); background: rgba(239,68,68,.04); }
.asp-mini:disabled { opacity: .6; cursor: not-allowed; transform: none; }

.asp-sec-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: .8rem; }
.asp-card { border: 1px solid var(--bd); background: rgba(148,163,184,.02); border-radius: 14px; padding: .8rem; }
.asp-card-head h3 { margin: 0; font-size: .86rem; letter-spacing: -.01em; }
.asp-stack { display: grid; gap: .7rem; margin-top: .65rem; }
.asp-password-field { display: grid; grid-template-columns: 1fr auto; gap: .5rem; align-items: start; }

.asp-strength { display: grid; gap: .35rem; }
.asp-strength-bar { height: 8px; border-radius: 999px; background: rgba(148,163,184,.12); overflow: hidden; }
.asp-strength-bar span { height: 100%; display: block; border-radius: inherit; transition: width .25s var(--ez); }
.asp-strength-bar span.s0, .asp-strength-bar span.s1 { background: #ef4444; }
.asp-strength-bar span.s2 { background: #f59e0b; }
.asp-strength-bar span.s3 { background: #10b981; }
.asp-strength-bar span.s4 { background: #0ea5e9; }
.asp-strength p { margin: 0; color: var(--muted); font-size: .73rem; }
.asp-strength strong { color: var(--txt); }

.asp-toggle-row {
  display: flex; align-items: center; justify-content: space-between; gap: .75rem; padding: .6rem .65rem; border: 1px solid var(--bd); border-radius: 12px; background: var(--card);
}
.asp-toggle-row strong { display: block; font-size: .8rem; letter-spacing: -.01em; }
.asp-toggle-row span { display: block; color: var(--muted); font-size: .72rem; margin-top: .15rem; max-width: 42ch; }
.asp-switch {
  width: 46px; height: 28px; border-radius: 999px; border: 1px solid var(--bd); background: rgba(148,163,184,.18);
  position: relative; cursor: pointer; transition: background-color .2s var(--ez), border-color .2s var(--ez);
}
.asp-switch span {
  position: absolute; top: 3px; left: 3px; width: 20px; height: 20px; border-radius: 999px; background: #fff; box-shadow: 0 3px 10px rgba(15,23,42,.15);
  transition: transform .2s var(--ez);
}
.asp-switch.on { background: rgba(79,70,229,.18); border-color: rgba(79,70,229,.24); }
.asp-switch.on span { transform: translateX(18px); background: #4F46E5; }

.asp-qr-card { border: 1px solid var(--bd); border-radius: 12px; background: var(--card); padding: .65rem; display: grid; grid-template-columns: 88px 1fr; gap: .65rem; align-items: center; }
.asp-qr-placeholder {
  width: 88px; height: 88px; border-radius: 12px; border: 1px dashed rgba(79,70,229,.22); background:
  linear-gradient(45deg, rgba(79,70,229,.05) 25%, transparent 25%, transparent 50%, rgba(79,70,229,.05) 50%, rgba(79,70,229,.05) 75%, transparent 75%);
  background-size: 12px 12px; display: grid; place-items: center; color: var(--p); font-weight: 800;
}
.asp-qr-card strong { display: block; font-size: .8rem; }
.asp-qr-card p { margin: .2rem 0 .35rem; color: var(--muted); font-size: .73rem; }
.asp-badge { display: inline-flex; border-radius: 999px; padding: .28rem .5rem; font-size: .7rem; font-weight: 700; border: 1px solid transparent; }
.asp-badge.ok { color: #10b981; background: rgba(16,185,129,.08); border-color: rgba(16,185,129,.15); }
.asp-badge.warn { color: #f59e0b; background: rgba(245,158,11,.1); border-color: rgba(245,158,11,.18); }

.asp-session-list { display: grid; gap: .55rem; }
.asp-session-row { border: 1px solid var(--bd); border-radius: 12px; padding: .65rem; background: var(--card); display: flex; align-items: center; justify-content: space-between; gap: .75rem; }
.asp-session-row strong { display: block; font-size: .8rem; }
.asp-session-row span { display: block; color: var(--muted); font-size: .72rem; margin-top: .15rem; }
.asp-session-row small { display: block; color: var(--muted); font-size: .7rem; margin-top: .1rem; }

.asp-toggle-list { display: grid; gap: .65rem; }

.asp-system-grid { display: grid; grid-template-columns: 1fr 1fr; gap: .8rem; }
.asp-theme-preview { margin-top: .55rem; border-radius: 12px; border: 1px solid var(--bd); background: linear-gradient(180deg, rgba(148,163,184,.04), rgba(148,163,184,.02)); padding: .65rem; min-height: 82px; display: grid; place-items: center; }
.asp-theme-preview .chip { border-radius: 999px; padding: .35rem .6rem; font-weight: 700; font-size: .75rem; border: 1px solid transparent; }
.asp-theme-preview .chip.light { background: rgba(79,70,229,.08); border-color: rgba(79,70,229,.14); color: var(--p); }
.asp-theme-preview .chip.dark { background: rgba(30,41,59,.12); border-color: rgba(30,41,59,.18); color: #1e293b; }

.asp-logout-panel .asp-logout-card {
  border: 1px solid rgba(239,68,68,.14); background: rgba(239,68,68,.03); border-radius: 14px; padding: .8rem; display: grid; grid-template-columns: 40px 1fr; gap: .65rem; align-items: start;
}
.asp-danger-icon {
  width: 40px; height: 40px; border-radius: 12px; background: rgba(239,68,68,.08); color: #ef4444; border: 1px solid rgba(239,68,68,.15); display: grid; place-items: center; font-weight: 800;
}
.asp-logout-card strong { display: block; font-size: .85rem; }
.asp-logout-card p { margin: .2rem 0 0; color: var(--muted); font-size: .78rem; }

.asp-audit-panel { padding-top: .8rem; }
.asp-audit-list { display: grid; gap: .45rem; }
.asp-audit-row { border-radius: 10px; background: rgba(79,70,229,.03); padding: .55rem; display: grid; grid-template-columns: 12px 1fr; gap: .45rem; align-items: start; }
.asp-audit-row .dot { width: 7px; height: 7px; margin-top: .36rem; border-radius: 999px; background: var(--p); }
.asp-audit-row p { margin: 0; color: var(--txt); font-size: .77rem; line-height: 1.35; }

.asp-modal-layer {
  position: fixed; inset: 0; z-index: 56; display: grid; place-items: center;
}
.asp-overlay {
  position: absolute; inset: 0; background: rgba(15,23,42,.36); backdrop-filter: blur(5px); animation: aspFade .2s ease;
}
.asp-modal {
  position: relative; width: min(430px, calc(100vw - 1rem)); border: 1px solid var(--bd); background: var(--card); border-radius: 18px;
  box-shadow: var(--sh); padding: 1rem; display: grid; gap: .55rem; animation: aspPop .24s var(--ez);
}
.asp-modal-icon {
  width: 38px; height: 38px; border-radius: 12px; display: grid; place-items: center; border: 1px solid transparent; font-weight: 800;
}
.asp-modal-icon.warn { background: rgba(245,158,11,.1); border-color: rgba(245,158,11,.18); color: #f59e0b; }
.asp-modal-icon.danger { background: rgba(239,68,68,.08); border-color: rgba(239,68,68,.16); color: #ef4444; }
.asp-modal h3 { margin: 0; font-size: 1rem; letter-spacing: -.02em; }
.asp-modal p { margin: 0; color: var(--muted); font-size: .84rem; line-height: 1.42; }
.asp-modal-actions { display: flex; justify-content: flex-end; gap: .55rem; flex-wrap: wrap; }

.asp-toast {
  position: fixed; right: 1rem; bottom: 1rem; z-index: 60; width: min(360px, calc(100vw - 1rem));
  border: 1px solid rgba(16,185,129,.18); border-radius: 14px; background: color-mix(in srgb, var(--card) 95%, transparent); box-shadow: var(--sh);
  padding: .75rem .85rem; display: grid; gap: .15rem; animation: aspToast .3s var(--ez);
}
.asp-toast strong { font-size: .82rem; color: #10b981; }
.asp-toast span { font-size: .76rem; color: var(--muted); }
.asp-toast.danger { border-color: rgba(239,68,68,.2); }
.asp-toast.danger strong { color: #ef4444; }

.asp-spin {
  width: 14px; height: 14px; border-radius: 999px; border: 2px solid rgba(255,255,255,.45); border-top-color: currentColor; display: inline-block;
  animation: aspSpin .8s linear infinite;
}
.asp-btn-soft .asp-spin, .asp-btn-ghost .asp-spin { border-color: rgba(79,70,229,.24); border-top-color: #4F46E5; }

.asp-skeleton { display: grid; grid-template-columns: 300px minmax(0, 1fr); gap: .9rem; }
.asp-skel-nav, .asp-skel-main {
  border: 1px solid var(--bd); background: var(--card); border-radius: 20px; box-shadow: var(--sh2);
}
.asp-skel-nav { min-height: 560px; background-image: linear-gradient(90deg, rgba(148,163,184,.08), rgba(148,163,184,.14), rgba(148,163,184,.08)); background-size: 220% 100%; animation: aspShimmer 1.2s linear infinite; }
.asp-skel-main { padding: .9rem; display: grid; gap: .6rem; }
.asp-skel-row { height: 52px; border-radius: 12px; border: 1px solid var(--bd); background-image: linear-gradient(90deg, rgba(148,163,184,.08), rgba(148,163,184,.14), rgba(148,163,184,.08)); background-size: 220% 100%; animation: aspShimmer 1.2s linear infinite; }
.asp-skel-row.tall { height: 210px; }

@media (max-width: 1180px) {
  .asp-layout, .asp-skeleton { grid-template-columns: 1fr; }
  .asp-tabs { position: static; }
  .asp-side-panels { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 920px) {
  .asp-form-grid, .asp-sec-grid, .asp-system-grid { grid-template-columns: 1fr; }
  .asp-password-field { grid-template-columns: 1fr; }
}
@media (max-width: 720px) {
  .asp-header { padding: .9rem; }
  .asp-tab { padding: .68rem .72rem; }
  .asp-side-panels { grid-template-columns: 1fr; }
  .asp-toggle-row { align-items: flex-start; }
  .asp-toggle-row span { max-width: none; }
  .asp-qr-card { grid-template-columns: 1fr; }
  .asp-session-row { align-items: flex-start; flex-direction: column; }
  .asp-actions-row { justify-content: stretch; }
  .asp-actions-row .asp-btn { width: 100%; }
}
@media (prefers-reduced-motion: reduce) {
  .asp-page, .asp-reveal, .asp-tab, .asp-skel-nav, .asp-skel-row, .asp-toast, .asp-modal { animation: none !important; }
  .asp-btn, .asp-tab, .asp-switch, .asp-switch span { transition: none !important; }
}

@keyframes aspFade { from { opacity: 0; } to { opacity: 1; } }
@keyframes aspReveal { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
@keyframes aspPop { from { opacity: 0; transform: translateY(8px) scale(.985); } to { opacity: 1; transform: translateY(0) scale(1); } }
@keyframes aspToast { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
@keyframes aspTabIn { from { opacity: 0; transform: translateX(-6px); } to { opacity: 1; transform: translateX(0); } }
@keyframes aspShimmer { from { background-position: 0% 0; } to { background-position: 220% 0; } }
@keyframes aspPulse {
  0% { box-shadow: 0 0 0 0 rgba(16,185,129,.3); }
  70% { box-shadow: 0 0 0 10px rgba(16,185,129,0); }
  100% { box-shadow: 0 0 0 0 rgba(16,185,129,0); }
}
@keyframes aspSpin { to { transform: rotate(360deg); } }
@keyframes aspFieldShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  50% { transform: translateX(3px); }
  75% { transform: translateX(-2px); }
}
@keyframes aspLogoutFade {
  from { opacity: 1; transform: scale(1); }
  to { opacity: 0; transform: scale(.995); }
}
